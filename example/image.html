<!DOCTYPE html>
<html>
  <head>
    <title>A Knockout/Kinetic example</title>
    <script type="text/javascript" src="kinetic-v3.10.0.js"></script>
    <script type="text/javascript" src="knockout-2.1.0.debug.js"></script>
    <script type="text/javascript" src="../coffee-script.js"></script>
    <script type="text/coffeescript" src="../knockout-kinetic.coffee"></script>
  </head>
  <body>
    <!-- 
    This example is from the 'Image' tutorial:
    -->
    <div id="container">
      <!-- ko Kinetic.Stage: { width: 578, height: 200 } -->
      <!--     ko Kinetic.Layer: { } -->
      <!--         ko Kinetic.Image: { x: 578 / 2 - 53, y: 200 / 2 - 59, image: image, width: 106, height: 118 } -->
      <!--         /ko -->
      <!--     /ko -->
      <!-- /ko -->
    </div>
    <script type="text/javascript">
        (function () {
            var interval = 0;
            var tryBindings = function() {
                if (!ko.bindingHandlers['Kinetic.Stage']) return;
                clearInterval(interval);
                var viewModel = {
                    image: ko.observable()
                };
                ko.applyBindings(viewModel);
            
                var image = new Image();
                image.onload = function() {
                    viewModel.image(image);
                };
                image.src = "http://www.html5canvastutorials.com/demos/assets/yoda.jpg";
            };
            interval = setInterval(tryBindings, 100);
        })();
    </script>
</html>
