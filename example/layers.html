<!DOCTYPE html>
<html>
  <head>
    <title>Kinetic Layering test</title>
    <script type="text/javascript" src="knockout-2.1.0.debug.js"></script>
    <script type="text/javascript" src="../coffee-script.js"></script>
    <script type="text/javascript" src="kinetic-v3.10.0.js"></script>
    <script type="text/coffeescript" src="../knockout-kinetic.coffee"></script>
    <style type="text/css">
    </style>
  </head>  
  <body>
    <div id="container">
      <!-- ko Kinetic.Stage: { width: 500, height: 500 } -->
      <!--   ko with: first -->
      <!--     ko Kinetic.Layer: { } -->
      <!--       ko Kinetic.Text: { height: 500, width: 500, textFill: "black", text: $data, fill: "white" } -->
      <!--       /ko -->
      <!--     /ko -->
      <!--   /ko -->
      <!--   ko Kinetic.Layer: { } -->
      <!--     ko Kinetic.Text: second -->
      <!--     /ko -->
      <!--   /ko -->
      <!-- /ko -->
    </div>
    <script>
    (function(){
        var interval = 0;
        var tryBindings = function() {
            if (!ko.bindingHandlers['Kinetic.Stage']) return;
            clearInterval(interval);
            var vm = {
                first: ko.observable("I should be on bottom!"),
                second: {
                    text: "I should be on top!",                    
                    width: 500,
                    height: 500,
                    textFill: "black",
                    fill:  "white"
                }            
            };
            window['vm'] = vm;
            ko.applyBindings(vm, document.getElementById("container"));
        };
        interval = setInterval(tryBindings, 100);
    })();
    </script>
  </body>
</html>
